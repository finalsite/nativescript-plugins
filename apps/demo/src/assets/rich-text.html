<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<base href="/" />
		<title>Rich Text Editor</title>

		<style>
			html,
			body {
				padding: 0px;
				margin: 0px;
			}

			#editor {
				width: 100%;
				height: 100%;
			}
		</style>
	</head>

	<body>
		<div id="editor" contenteditable="true"></div>

		<script>
			window.addEventListener('ns-bridge-ready', function (e) {
				const nsWebViewBridge = e.detail || window.nsWebViewBridge;
				const editorInstance = document.getElementById('editor');

				nsWebViewBridge.on('sourceChanged', function (data) {
					editorInstance.innerHTML = data;
				});

				nsWebViewBridge.on('bold', function () {
					document.execCommand('bold');
				});

				nsWebViewBridge.on('underline', function () {
					document.execCommand('underline');
				});

				nsWebViewBridge.on('italic', function () {
					document.execCommand('italic');
				});

				editorInstance.addEventListener(
					'blur',
					function (event) {
						nsWebViewBridge.emit('blur', editorInstance.innerHTML);
					},
					false
				);

				editorInstance.addEventListener(
					'focus',
					function (event) {
						nsWebViewBridge.emit('focus', editorInstance.innerHTML);
					},
					false
				);

				editorInstance.addEventListener(
					'input',
					function (event) {
						nsWebViewBridge.emit('input', editorInstance.innerHTML);
					},
					false
				);
			});
		</script>
	</body>
</html>
